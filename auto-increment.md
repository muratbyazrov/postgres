[Содержание](README.md)

# Autoincrement

Автоинкремент

Общий принцип механизма автогенерации такой: внутри базы к каждой таблице создаётся и привязывается отдельный счётчик,
который увеличивается на единицу при вставке новой строки,
а получившееся значение записывается в то поле, которое помечено как автогенерируемое.

Такой автоинкремент известен под именем **GENERATED AS IDENTITY**:

```SQL
CREATE TABLE colors (
  -- Одновременное использование и первичного ключа и автогенерации
  id bigint PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  name varchar(255)
);
```

`SERIAL` - это устаревший вариант, который является особенностью Postgres и никак не связан с SQL,
в отличие от **GENERATED AS IDENTITY**

Структура из документации: <br>
`column_name type GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY[ ( sequence_option ) ]`

- `GENERATED ALWAYS` — не позволит добавлять значение самостоятельно, используя UPDATE или INSERT
- `GENERATED BY DEFAULT` — в отличие от предыдущего варианта, этот вариант позволяет добавлять значения самостоятельно

PostgreSQL позволяет иметь более одного автогенерируемого поля на таблицу.

Дока на [PostgresPro](https://postgrespro.ru/docs/postgresql/10/sql-createtable)

---
[Содержание](README.md)
