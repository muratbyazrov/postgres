[Содержание](README.md)

# Установка и настройка
## Установка

Способы установки:
- macos: `brew install postgresql`
- ubuntu: `apt install postgresql`
- docker: `docker run --name <name> -e POSTGRES_PASSWORD=<password>  [-e POSTGRES_USER=<user>] -d -p <port>:<port> postgres`

После установки автоматически:
- создается пользователь `postgres`
- создается база данных `postgres`


## Подключение
PostgreSQL поставляется со специальной программой psql - это клиент для PostgreSQL.<br>
Подключение к PostgreSQL всегда выполняется от имени конкретного пользователя и к конкретной базе данных.<br>

Для подключения к базе данных нужно знать:
- имя базы данных `-d` (по умолчанию совпадает с пользаком OS)
- имя сервера `-h` (по умолчанию локальный сервер)
- номер порта сервера `-p` (по умолчанию 5432)
- имя пользователя `-U`, под которым вы хотите подключиться (по умолчанию пользователь OS, например murat)<br>
Пример команды: `psql -h localhost -U postgres` или `sudo -u postgres psql -h localhost` (здесь мы флагом `-u` указали пользователя, от имени которого выполняется команда)

Имя БД, хост, порт и пользака можно задать через переменные окружения `PGDATABASE`, `PGHOST`, `PGPORT`, `PGUSER`.

Невозможно соединиться с СУБД просто так: соединение всегда происходит с конкретной базой данных.<br>
Так (`psql -h localhost -U postgres`) мы соединимся с базой postgres, так как по умолчанию подключение идет к одноменной с пользователем БД.<br>
Для подключения к БД от нового пользователя надо указывать базу с флагом `-d`<br>

Создать базу данных: `createdb <name>`
Удалить базу данных: `dropdb <name>`


## Пользователи
В старых версиях postgres исользовалось понятие пользователь и группа пользователей. Теперь оперируют понятием *Роль*. Роль и пользователь - это одно и то же.

Пользователь `postgres` имеет максимальные права. Предпочтительнее не работать под этим пользователем.

Создать новую роль:
`sudo -u postgres createuser --createdb murat -h localhost`
- Флаг `--createdb` добавляет нашей роли возможность создавать базы данных. По умолчанию этой возможности нет
- Флаг `-h` указывает хост, на котором вертится postgres

Удалить пользоваталя: `dropuser murat`
Посмотреть всех пользователей: `\du`;
Подробнее на [postgres pro](https://postgrespro.ru/docs/postgresql/11/app-createuser)

---
[Содержание](README.md)
